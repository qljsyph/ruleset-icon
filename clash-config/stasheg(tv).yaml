######### é”šç‚¹ start #######
# ç­–ç•¥ç»„ç›¸å…³
pr: &pr {type: select, proxies: [èŠ‚ç‚¹é€‰æ‹©, é¦™æ¸¯æ•…è½¬, æ—¥æœ¬æ•…è½¬, é¦™æ¸¯è‡ªåŠ¨, æ—¥æœ¬è‡ªåŠ¨, ç¾å›½è‡ªåŠ¨, éŸ©å›½è‡ªåŠ¨, å…¶ä»–åœ°åŒºè‡ªåŠ¨, è‡ªåŠ¨é€‰æ‹©, åŠ å¡èŠ‚ç‚¹, é¦™æ¸¯èŠ‚ç‚¹, éŸ©å›½èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, è´Ÿè½½å‡è¡¡, å…¨éƒ¨èŠ‚ç‚¹, ç›´è¿]}
#è¿™é‡Œæ˜¯è®¢é˜…æ›´æ–°å’Œå»¶è¿Ÿæµ‹è¯•ç›¸å…³çš„
p: &p {type: http, interval: 3600, health-check: {enable: true, url: "https://www.gstatic.com/generate_204", interval: 300}}
######### é”šç‚¹ end #######

proxy-providers:
  provider1:
    !!merge <<: *p
    url: "è®¢é˜…é“¾æ¥1"
  provider2:
    !!merge <<: *p
    url: "è®¢é˜…é“¾æ¥2"
ipv6: true
allow-lan: true
mixed-port: 7890
external-controller: 127.0.0.1:9090
profile:
  store-selected: true
  store-fake-ip: true
dns:
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
    - "rule-set:cn_domain"
    - "rule-set:private_domain"
    - "+.apple.com"
    - "+.icloud.com"
  default-nameserver:
    - 223.5.5.5
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  nameserver-policy:
    "rule-set:private_domain,cn_domain": https://doh.pub/dns-query
    "rule-set:geolocation-!cn": https://dns.google/dns-query
script:
  shortcuts:
    quic: network == 'udp' and dst_port == 443
proxies:
- name: "ç›´è¿"
  type: direct
  udp: true
proxy-groups:
  - {name: èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [é¦™æ¸¯æ•…è½¬, æ—¥æœ¬æ•…è½¬, é¦™æ¸¯è‡ªåŠ¨, æ—¥æœ¬è‡ªåŠ¨, ç¾å›½è‡ªåŠ¨, éŸ©å›½è‡ªåŠ¨, å…¶ä»–åœ°åŒºè‡ªåŠ¨, è‡ªåŠ¨é€‰æ‹©, åŠ å¡èŠ‚ç‚¹, éŸ©å›½èŠ‚ç‚¹, é¦™æ¸¯èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, è´Ÿè½½å‡è¡¡, å…¨éƒ¨èŠ‚ç‚¹, ç›´è¿], icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Server.png"}
  - {name: YouTube, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/YouTube.png"}
  - {name: Hulu, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Hulu.png"}
  - {name: NETFLIX, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Netflix.png"}
  - {name: Disney, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Disney.png"}
  - {name: Bahamut, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Bahamut_b.png"}
  - {name: HBO, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/HBO_MAX.png"}
  - {name: Spotify, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Spotify.png"}
  - {name: Speedtest, !!merge <<: *pr, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/SpeedTest.png"}
  - {name: Apple, type: select, proxies: [ç›´è¿, èŠ‚ç‚¹é€‰æ‹©, ç¾å›½è‡ªåŠ¨, é¦™æ¸¯è‡ªåŠ¨], icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Apple_black.png"}
  - {name: å…¨çƒç›´è¿, type: select, proxies: [ç›´è¿, èŠ‚ç‚¹é€‰æ‹©], icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/China.png"}
  - {name: æ¼ç½‘ä¹‹é±¼, type: select, proxies: [è‡ªåŠ¨é€‰æ‹©, èŠ‚ç‚¹é€‰æ‹©, è´Ÿè½½å‡è¡¡, ç›´è¿, å…¶ä»–åœ°åŒºè‡ªåŠ¨], icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Omission.png"}
  - {name: é¦™æ¸¯èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ¸¯|hk|hongkong|hong kong", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Hong_Kong.png"}
  - {name: åŠ å¡èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ–°åŠ å¡|ç‹®åŸ|å¡|SG", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Singapore.png"}
  - {name: éŸ©å›½èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)éŸ©|éŸ©å›½|KR|kora", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/South_Korea.png"}
  - {name: æ—¥æœ¬èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ—¥|jp|japan", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Japan.png"}
  - {name: ç¾å›½èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)ç¾|us|unitedstates|united states", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/USA.png"}
  - {name: é¦™æ¸¯æ•…è½¬, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Failover.png"}
  - {name: æ—¥æœ¬æ•…è½¬, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ—¥æœ¬|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Failover.png"}
  - {name: é¦™æ¸¯è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: æ—¥æœ¬è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ—¥æœ¬|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: ç¾å›½è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(ç¾|US|(?i)States|America))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: éŸ©å›½è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(éŸ©|KR|(?i)States|Kora))^((?!(ç¾|æ¸¯|å°|æ—¥|æ–°|3|x3)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: å…¶ä»–åœ°åŒºè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "^((?!(æ¸¯|ç¾|æ—¥|éŸ©|æ–°|US|HK|JP|KR|SG|America|States|Japan|Korea|Singapore|Hong|ç›´è¿)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: è‡ªåŠ¨é€‰æ‹©, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "^((?!(ç›´è¿)).)*$", icon: "https://raw.githubusercontent.com/Vbaethon/HOMOMIX/refs/heads/main/Icon/Color/Large/Auto_Link.png"}
  - {name: è´Ÿè½½å‡è¡¡, type: load-balance, include-all: true, tolerance: 150, interval: 300, filter: "(?=.*(0.1|0.5|(?i)States|Kora|éŸ©å›½|ä¿„ç½—æ–¯|æ–°åŠ å¡|è¶Šå—))^((?!(ğŸ‡¸ğŸ‡¬|2x|x2|x3)).)*$", icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Large/Load_balancing_2.png"}
  - {name: å…¨éƒ¨èŠ‚ç‚¹, type: select, include-all: true, icon: "https://raw.githubusercontent.com/qljsyph/HOMOMIX/refs/heads/main/Icon/Color/Link.png"}

rules:
- RULE-SET,private_domain,ç›´è¿
- RULE-SET,direct1,ç›´è¿
- RULE-SET,apple_domain,Apple
- RULE-SET,applecn,Apple
- RULE-SET,proxylite,èŠ‚ç‚¹é€‰æ‹©
- RULE-SET,youtube_domain,YouTube
- RULE-SET,disney_domain,Disney
- RULE-SET,hulu_domain,Hulu
- RULE-SET,netflix_domain,NETFLIX
- RULE-SET,spotify,Spotify
- RULE-SET,bahamut_domain,Bahamut
- RULE-SET,hbo_domain,HBO
- RULE-SET,speedtest_domain,Speedtest
- RULE-SET,geolocation-!cn,èŠ‚ç‚¹é€‰æ‹©
- RULE-SET,cn_domain,å…¨çƒç›´è¿
- RULE-SET,netflix_ip,NETFLIX,no-resolve
- RULE-SET,spotify_ip,Spotify,no-resolve
- RULE-SET,private_ip,ç›´è¿,no-resolve #è§„åˆ™é›†IPè§„åˆ™ç›¸å…³è” private_ip
- RULE-SET,cn_ip,å…¨çƒç›´è¿,no-resolve
- MATCH,æ¼ç½‘ä¹‹é±¼

rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
rule-providers: 
  private_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.list"}
  direct1: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/mihomo/domain/Direct-enhance.yaml"}
  applecn: {!!merge <<: *class, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Apple.list"}
  proxylite: {!!merge <<: *class, url: "https://raw.githubusercontent.com/qljsyph/rule/refs/heads/MTP-rules/ProxyLiteqcyhub.list"}
  youtube_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.yaml"}
  hulu_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/hulu.yaml"}
  disney_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/disney.yaml"}
  netflix_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.yaml"}
  bahamut_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/bahamut.yaml"}
  hbo_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/hbo.yaml"}
  spotify: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/spotify.yaml"}
  apple_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.yaml"}
  speedtest_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.yaml"}
  gfw_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.yaml"}
  geolocation-!cn: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.yaml"}
  cn_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.yaml"}
  cn_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.yaml"}
  private_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geoip/private.yaml"} #ç§æœ‰IP rule set no resolve
  netflix_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.yaml"}
  spotify_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/qljsyph/ruleset-icon/refs/heads/main/mihomo/ipcidr/spotify-ip.yaml"}